<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="page">
    <canvas id="draw"></canvas>
    <div id="edit">
        <section class="tool">
            <span>工具</span>
            <div class="paint">绘画 &#xe665;</div>
            <div class="earser">橡皮擦 &#xe77b;</div>
            <div class="empty">清空 &#xe71a;</div>
        </section>
        <section class="shape">
            <span>形状</span>
            <div class="triangle">三角形 &#xe60f;</div>
            <div class="rectangle">矩形 &#xe605;</div>
            <div class="circle">圆形 &#xe933;</div>
            <!--<div class="sector">扇形</div>-->
        </section>
        <section class="lineWidth">
            <span>粗细</span>
            <div class="thin">细</div>
            <div class="middleThin">中细</div>
            <div class="middleWide">中粗</div>
            <div class="wide">粗</div>
        </section>
        <section class="color">
            <span>颜色</span>
            <div class="allColor">
                <div class="black">黑</div>
                <div class="red">红</div>
                <div class="orange">橙</div>
                <div class="yellow">黄</div>
                <div class="gray">灰</div>
                <div class="green">绿</div>
                <div class="blue">蓝</div>
                <div class="pink">紫</div>
            </div>
        </section>
        <section class="download">下载作品 &#xe600;</section>
    </div>
    </div>
    <div id="modul"><span>关闭窗口之前，请确认已保存您的作品</span></div>
    <script src="js/main.js"></script>
    <!--<script src="js/removeEvent.js"></script>-->
    <script src="js/tool.js"></script>
    <script src="js/shape.js"></script>
    <script src="js/lineWidth.js"></script>
    <script src="js/color.js"></script>
    <script>
/*
        ctx.beginPath(); // 开始路径绘制
        ctx.moveTo(20, 20); // 设置路径起点，坐标为(20,20)
        ctx.lineTo(200, 20); // 绘制一条到(200,20)的直线
        ctx.lineTo(300, 200);
        ctx.closePath()
        ctx.lineWidth = 2.0; // 设置线宽 有默认值
        ctx.lineCap = "butt"; //设置端点样式:butt(默认),round,square
        ctx.lineJoin = "miter"; //设置连接样式:miter(默认),bevel,round
        ctx.strokeStyle = 'red'; // 设置线的颜色
        ctx.stroke(); // 进行线的着色，这时整条线才变得可见
*/
let download = document.getElementsByClassName('download')[0]
download.addEventListener('click',function(){
    creatAndDownload()
})
function creatAndDownload(){ //模拟下载事件
    let a = document.createElement('a')
        a.setAttribute('href',canvas.toDataURL())
        a.setAttribute('download','mywork')
    let event = new MouseEvent('click')
    a.addEventListener('click',function(){
        //console.log(123122)
    })
    a.dispatchEvent(event)
    //a.click()  这种方式也可以
}

    </script>
</body>
</html>